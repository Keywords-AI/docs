---
title: "Instructor"
description: "Trace Instructor structured LLM outputs with Respan."
---

<Accordion title="Set up Respan">
1. **Sign up** — Create an account at [platform.respan.ai](https://platform.respan.ai)
2. **Create an API key** — Generate one on the [API keys page](https://platform.respan.ai/platform/api/api-keys)
3. **Add credits or a provider key** — Add credits on the [Credits page](https://platform.respan.ai/platform/api/credits) or connect your own provider key on the [Integrations page](https://platform.respan.ai/platform/api/integrations)
</Accordion>

## What is Instructor?

[Instructor](https://python.useinstructor.com/) is a Python library for getting structured data (JSON) from LLMs using Pydantic models. It patches OpenAI and other LLM clients to return validated, typed responses. The Respan integration uses `respan-tracing` auto-instrumentation to capture all LLM calls.

<Check>
Example project: [GitHub Link](https://github.com/respanai/respan-example-projects/tree/main/python/tracing/instructor)
</Check>

## Setup

<Steps>
<Step title="Install packages">

```bash
pip install instructor openai respan-tracing
```

</Step>

<Step title="Set environment variables">

```bash
export RESPAN_API_KEY="YOUR_RESPAN_API_KEY"
export OPENAI_API_KEY="YOUR_OPENAI_API_KEY"
```

</Step>

<Step title="Initialize and run">

```python
from respan_tracing import RespanTelemetry, workflow, task, Instruments
from openai import OpenAI
import instructor
from pydantic import BaseModel

# Initialize Respan — auto-instruments OpenAI calls
telemetry = RespanTelemetry(instruments={Instruments.OPENAI})

# Patch OpenAI with Instructor
client = instructor.from_openai(OpenAI())

class User(BaseModel):
    name: str
    age: int

@task(name="extract_user")
def extract_user(text: str) -> User:
    return client.chat.completions.create(
        model="gpt-4o-mini",
        response_model=User,
        messages=[{"role": "user", "content": f"Extract user info: {text}"}],
    )

@workflow(name="extraction_pipeline")
def extraction_pipeline():
    user = extract_user("John is 30 years old")
    print(f"Name: {user.name}, Age: {user.age}")
    return user

extraction_pipeline()
```

</Step>

<Step title="View your trace">

Open the [Traces page](https://platform.respan.ai/platform/traces) to see your extraction traces.

</Step>
</Steps>

## Configuration

Instructor uses the `respan-tracing` SDK. `Instruments.OPENAI` auto-captures all OpenAI calls made by Instructor.

See the [Python Tracing SDK reference](/sdks/python/tracing/main/initialize) for configuration options.

